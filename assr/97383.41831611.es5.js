"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[97383],{26684:function(e,n,t){t.d(n,{W:function(){return s}});var r=t(45761),i=t(63366),a=t(94578),o=t(67294),u=t(83790),c=t(90741),l=["children","className","data","onClick","publisherEvent","sendOnRender","tag"],f=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(n=e.call.apply(e,[this].concat(r))||this).handleSendEvent=function(){var e=n.props,t=(e.children,e.className,e.data),r=(e.onClick,e.publisherEvent,e.sendOnRender,e.tag,(0,i.Z)(e,l));(0,c.q)(Object.assign({},t,r))},n}(0,a.Z)(n,e);var t=n.prototype;return t.componentDidMount=function(){var e=this.props,n=e.blockSend,t=e.publisherEvent;e.sendOnRender&&!n&&this.handleSendEvent(),t&&(0,u.Ld)(t,c.q)},t.componentWillUnmount=function(){var e=this.props.publisherEvent;e&&(0,u.r1)(e,c.q)},t.render=function(){var e=this,n=this.props,t=n.blockSend,r=n.children,i=n.className,a=n.sendOnRender,u=n.tag;if(a||!r)return null;if(null===u&&(0,o.isValidElement)(r))return(0,o.cloneElement)(r,{onClick:function(n){t||e.handleSendEvent(),r.props.onClick&&r.props.onClick(n)}});var c=u||"span";return o.createElement(c,{className:i,onClick:this.handleSendEvent},r)},n}(o.Component),s=(0,r.A)()(f)},35318:function(e,n,t){t.d(n,{jO:function(){return r},tc:function(){return i},pt:function(){return a}});var r=""+(window||self).__CLIENT_ENV__.TRANBILOG_URL,i=""+(window||self).__CLIENT_ENV__.ANKETA_MAIN_HOST,a=i+"/alfaform-common-land/?"},8664:function(e,n,t){t.d(n,{i:function(){return g}});var r,i={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},a=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(a)}for(var u=[],c=0;c<256;++c)u.push((c+256).toString(16).slice(1));function l(e,n){return void 0===n&&(n=0),(u[e[n+0]]+u[e[n+1]]+u[e[n+2]]+u[e[n+3]]+"-"+u[e[n+4]]+u[e[n+5]]+"-"+u[e[n+6]]+u[e[n+7]]+"-"+u[e[n+8]]+u[e[n+9]]+"-"+u[e[n+10]]+u[e[n+11]]+u[e[n+12]]+u[e[n+13]]+u[e[n+14]]+u[e[n+15]]).toLowerCase()}var f=function(e,n,t){if(i.randomUUID&&!n&&!e)return i.randomUUID();var r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){t=t||0;for(var a=0;a<16;++a)n[t+a]=r[a];return n}return l(r)},s=t(99450),d=t(83487),v=t(35318),p=t(6454),m=function(e){var n,t,r=e.actions,i=e.values;return Object.assign({},i,{productType:null!==(n=null==(t=i.card)?void 0:t.id)&&void 0!==n?n:r.productType,phone:(0,p.L)(i.phone),product:"dc"})},h={cc:function(e){var n,t,r=e.actions,i=e.values;return Object.assign({},i,{productType:null!==(n=null==(t=i.card)?void 0:t.id)&&void 0!==n?n:r.productType,phone:(0,p.L)(i.phone),card:void 0,product:"cc"})},dc:m,mg:function(e){var n=e.values;return Object.assign({},n,{phone:(0,p.L)(n.phone)})},"dc-short":m,pil:function(e){var n=e.values;return Object.assign({},n,{phone:(0,p.L)(n.phone),product:"pil"})},sme:function(e){var n=e.values;return Object.assign({},n,{phone:(0,p.L)(n.phone)})}},g=function(e){var n=e.actions,t=e.product,r=e.source,i=e.recipient,a=void 0===i?v.pt:i;return(0,d.N)((0,d.h)((function(e){var i;if(r&&t&&h[t]){var o=e.getState(),u=o.valid,c=o.values;if(u){var l=h[t]({values:c,actions:n});if(l){var d=n.bannerId,p=n.platformId,m={businessUid:f(),clientData:{bannerId:null!=d?d:void 0,platformId:null!==(i="function"==typeof p?p():p)&&void 0!==i?i:""},clientDate:(0,s.b)(new Date),recipient:a,status:"OK",data:l,source:r};fetch(v.jO,{method:"POST",headers:{"Content-Type":"application/json"},keepalive:!0,body:JSON.stringify(m)})}}}})))}},83487:function(e,n,t){t.d(n,{h:function(){return i},N:function(){return a}});var r=t(67294),i=function(e){return function(n){var t=n.submit;return n.submit=function(){return e(n),t()},function(){n.submit=t}}},a=function(e){return(0,r.useRef)(e).current}},77555:function(e,n,t){t.d(n,{l:function(){return V}});var r=t(63366),i=t(67294);function a(){return a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},a.apply(this,arguments)}function o(e,n,t,r){void 0===r&&(r=e),delete e.fields[n.name],e.fields[t]=a({},n,{name:t,change:r.fields[t]&&r.fields[t].change,blur:r.fields[t]&&r.fields[t].blur,focus:r.fields[t]&&r.fields[t].focus,lastFieldState:void 0}),e.fields[t].change||delete e.fields[t].change,e.fields[t].blur||delete e.fields[t].blur,e.fields[t].focus||delete e.fields[t].focus}var u=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},c=function(e,n,t){var r=e[0],i=e[1],c=e[2],l=t.changeValue;t.resetFieldState;l(n,r,(function(e){var n=[].concat(e||[]);return n.splice(i,0,c),n}));var f=a({},n.fields),s=new RegExp("^"+u(r)+"\\[(\\d+)\\](.*)");Object.keys(n.fields).sort().reverse().forEach((function(e){var t=s.exec(e);if(t){var a=Number(t[1]);if(a>=i){var u=r+"["+(a+1)+"]"+t[2];o(n,f[e],u)}}}))};function l(e,n,t,r){Object.keys(r.fields).forEach((function(i){if(i.substring(0,n.length)===n){var a=i.substring(n.length),u=e+"["+t+"]"+a;o(r,r.fields[i],u)}}))}function f(e,n){Object.keys(e.fields).forEach((function(t){e.fields[t]=a({},e.fields[t],{change:e.fields[t].change||n.fields[t]&&n.fields[t].change,blur:e.fields[t].blur||n.fields[t]&&n.fields[t].blur,focus:e.fields[t].focus||n.fields[t]&&n.fields[t].focus}),e.fields[t].change||delete e.fields[t].change,e.fields[t].blur||delete e.fields[t].blur,e.fields[t].focus||delete e.fields[t].focus}))}var s=function(e,n,t){var r,i=e[0],c=e[1],l=t.changeValue,f=t.renameField;l(n,i,(function(e){var n=[].concat(e||[]);return r=n[c],n.splice(c,1),n}));var s=new RegExp("^"+u(i)+"\\[(\\d+)\\](.*)"),d=a({},n,{fields:a({},n.fields)});return Object.keys(n.fields).forEach((function(e){var t=s.exec(e);if(t){var r=Number(t[1]);if(r===c)delete n.fields[e];else if(r>c){delete n.fields[e];var a=i+"["+(r-1)+"]"+t[2];d.fields[a]?o(n,d.fields[e],a,d):f(n,e,a)}}})),r},d={insert:c,concat:function(e,n,t){var r=e[0],i=e[1];(0,t.changeValue)(n,r,(function(e){return e?[].concat(e,i):i}))},move:function(e,n,t){var r=e[0],i=e[1],o=e[2],u=t.changeValue;if(i!==o){u(n,r,(function(e){var n=[].concat(e||[]),t=n[i];return n.splice(i,1),n.splice(o,0,t),n}));var c=a({},n,{fields:a({},n.fields)});if(l(r,r+"["+i+"]","tmp",n),i<o)for(var s=i+1;s<=o;s++){l(r,r+"["+s+"]",""+(s-1),n)}else for(var d=i-1;d>=o;d--){l(r,r+"["+d+"]",""+(d+1),n)}l(r,r+"[tmp]",o,n),f(n,c)}},pop:function(e,n,t){var r,i,a=e[0];if((0,t.changeValue)(n,a,(function(e){if(e)return e.length?(i=e.length-1,r=e[i],e.slice(0,i)):[]})),void 0!==i){var o=new RegExp("^"+u(a)+"\\["+i+"].*");Object.keys(n.fields).forEach((function(e){o.test(e)&&delete n.fields[e]}))}return r},push:function(e,n,t){var r=e[0],i=e[1];(0,t.changeValue)(n,r,(function(e){return e?[].concat(e,[i]):[i]}))},remove:s,removeBatch:function(e,n,t){var r=e[0],i=e[1],c=t.changeValue,l=[].concat(i);l.sort();for(var f=0;f<l.length;f++)f>0&&l[f]===l[f-1]&&l.splice(f--,1);var s=[];c(n,r,(function(e){if(s=i.map((function(n){return e&&e[n]})),!e||!l.length)return e;var n=[].concat(e),t=[];return l.forEach((function(r){n.splice(r-t.length,1),t.push(e&&e[r])})),n}));var d=new RegExp("^"+u(r)+"\\[(\\d+)\\](.*)"),v=a({},n,{fields:{}});return Object.keys(n.fields).forEach((function(e){var t,i=d.exec(e);if(i){var a=Number(i[1]);if(!~l.indexOf(a)){var u=r+"["+(a-(t=a,l.reduce((function(e,n){return n<t?e+1:e}),0)))+"]"+i[2];o(v,n.fields[e],u,n)}}else v.fields[e]=n.fields[e]})),n.fields=v.fields,s},shift:function(e,n,t){var r=e[0];return s([r,0],n,t)},swap:function(e,n,t){var r=e[0],i=e[1],o=e[2],u=t.changeValue;if(i!==o){u(n,r,(function(e){var n=[].concat(e||[]),t=n[i];return n[i]=n[o],n[o]=t,n}));var c=a({},n,{fields:a({},n.fields)}),s=r+"["+o+"]",d=r+"[tmp]";l(r,r+"["+i+"]","tmp",n),l(r,s,i,n),l(r,d,o,n),f(n,c)}},unshift:function(e,n,t){var r=e[0],i=e[1];return c([r,0,i],n,t)},update:function(e,n,t){var r=e[0],i=e[1],a=e[2];(0,t.changeValue)(n,r,(function(e){var n=[].concat(e||[]);return n.splice(i,1,a),n}))}},v=t(94184),p=t.n(v),m=t(35318),h=function(e,n){var t=(0,i.useState)(""),r=t[0],a=t[1],o=(0,i.useState)(e),u=o[0],c=o[1];return(0,i.useEffect)((function(){return a(function(e,n){return""+(n?""+m.tc+n:m.pt)+Object.keys(e).map((function(n){return{key:n,value:(t=e[n],"function"==typeof t?t():t)};var t})).filter((function(e){var n=e.value;return n||0===n})).map((function(e){return e.key+"="+e.value})).join("&")}(u,n))}),[n,u]),[r,function(e){var n=e[0];return c((function(e){return Object.assign({},e,n)}))}]},g=function(e,n,t,r){var i=e.errors,a=e.values;return function(e,n){if(e.length<2)return e;for(var t=Array.from(e),r=0;r<=n;r+=1)t.push(t.shift());return t.pop(),t}(t,t.findIndex((function(e){return e===r}))).find((function(e){var t;return(i[e]||!a[e])&&(null==(t=n[e])?void 0:t.data.receivesFocus)}))},b=function(e,n){return function(t,r){var i=t[0];if(r.lastFormState){var a=r.lastFormState,o=a.hasValidationErrors,u=a.pristine;if(o||u){var c=g(r.lastFormState,r.fields,n,i);if(!c)return;!function(e){var n;if(e){var t=(null==(n=e.value)?void 0:n.length)||0;null==e.focus||e.focus(),e.setSelectionRange&&e.setSelectionRange(t,t)}}(function(e,n){var t=e.fields;return n&&t[n].data.ref.current}(r,c))}else!function(e){var n,t;null==(n=e.current)||null==(t=n.querySelector("button[type=submit]"))||t.focus()}(e)}}},O=t(8664),y=t(83790),E=t(83487),S={f:"Женский",m:"Мужской",none:void 0},N={gender:{placeholder:"Пол"},sopdConfirmed:{placeholder:"Лицензионное соглашение"}},j="form-send-metrics",I=function(e,n){return e.map((function(e){var t,r,i;return(null==(t=n.getFieldState(e))||null==(r=t.data)?void 0:r.placeholder)||(null==(i=N[e])?void 0:i.placeholder)||e})).join(", ")},w=function(e){return(0,E.N)((0,E.h)((function(n){if(e){var t=n.getState(),r=Object.keys(t.errors),i=t.values,a=i.email,o={firstName:i.firstName,lastName:i.lastName,middleName:i.middleName,email:a};if(r.length){if(!e.submitOnFail)return;(0,y.nY)(j,Object.assign({},e.submitOnFail,{data:o,incorrect:I(r,n)}))}else e.submit&&(0,y.nY)(j,Object.assign({},e.submit,{data:o,gender:S[t.values.gender||"none"],subproduct:t.values.card}))}})))},L=(0,E.h)((function(e){var n,t,r,i=e.getState(),a=e.getRegisteredFields(),o=i.errors,u=a.find((function(e){return o[e]}));if(u){var c=null==(n=e.getFieldState(u))||null==(t=n.data)||null==(r=t.ref)?void 0:r.current;if(c){var l=document.documentElement.scrollTop,f=c.getBoundingClientRect().top+l;f<l&&window.scrollTo({top:f})}}})),_=t(72473),k=t(44241),C=function(e){var n=e.children,t=e.pagination,r=t.addPage,a=t.isLastPage,o=t.nextPage,u=t.page,c=t.prevPage;return i.createElement(k.I.Provider,{value:{addPage:r,nextPage:o,prevPage:c,page:u,isLastPage:a}},n)},P=["bannerId","platformId"],V=function(e){var n,t,a=e.DataLayer,o=e.FinalForm,u=e.actionPath,c=e.analytics,l=e.backgroundColor,f=e.bannerId,s=e.businessLoggingSource,v=e.children,m=e.dataTestId,g=void 0===m?"form":m,y=e.focusEnabled,S=void 0===y||y,N=e.formAction,I=e.formHash,V=e.id,A=void 0===V?"form":V,F=e.initialValues,R=e.inputsOrder,D=e.onSubmit,T=e.platformId,U=e.metricEvent,x=void 0===U?j:U,M=e.noValidate,B=void 0!==M&&M,W=e.product,H=e.encType,q=e.styles,K=e.validateOnBlur,Y=void 0===K||K,Z=e.className,$=e.showFormOuterWrapper,z=void 0===$||$,G=e.toggleFormOuterWrapper,J=void 0!==G&&G,Q=e.mutators,X=e.preventSubmit,ee=Object.assign({bannerId:f,platformId:T,product:W},N),ne=(0,k.h)(),te=(0,i.useRef)(null),re=h(ee,u),ie=re[0],ae=re[1];(0,i.useEffect)((function(){ee.bannerId,ee.platformId;var e=(0,r.Z)(ee,P);ae([Object.assign({},e)])}),[W,N]);var oe,ue,ce=(0,i.useMemo)((function(){return function(e,n){if(n)return{fieldsOrder:n};var t=[];return function e(n){return i.Children.forEach(n,(function(n){if(i.isValidElement(n)){var r=n.props,a=r.children,o=r.name;if("string"==typeof o)t.push(o);else if("object"==typeof o){var u=_.I.getNames(o);Object.getOwnPropertyNames(u).forEach((function(e){t.push(e)}))}a&&e(a)}}))}(e),{fieldsOrder:t}}(v,R)}),[v,R]),le=ce.fieldsOrder;return i.createElement("div",{className:p()((n={},n[q.formOuterWrapper]=z,n),(t={},t[q.formOuterWrapperForMobile]=J,t),l&&J&&[q[l+"BackgroundColor"]],Z)},i.createElement(o,{decorators:[L,w(c),(oe=I,ue=S,(0,E.N)((function(e){if(!oe||!ue)return function(){};var n=function(n){oe&&"function"==typeof n.composedPath&&n.composedPath().some((function(e){return(null==e.getAttribute?void 0:e.getAttribute("href"))==="#"+oe}))&&(n.preventDefault(),window.location.hash=oe,e.mutators.onComplete())};return window.addEventListener("click",n,!1),function(){window.removeEventListener("click",n,!1)}}))),(0,O.i)({actions:ee,product:W,source:s})],initialValues:F,mutators:Object.assign({},d,Q,{onComplete:b(te,le),onUpdateFormAction:ae}),onSubmit:function(e,n,t){te.current&&(ne.isLastPage?D?D(te.current,n,t||function(){}):X||te.current.submit():ne.nextPage())},render:function(e){var n=e.handleSubmit;return i.createElement("form",{ref:te,action:ie,className:q.full,"data-test-id":g,encType:H,id:A,method:"post",noValidate:B,onSubmit:n},i.createElement(C,{pagination:ne},v),c&&i.createElement(a,{publisherEvent:x}))},validateOnBlur:Y}))}},44241:function(e,n,t){t.d(n,{I:function(){return i},h:function(){return a}});var r=t(67294),i=(0,r.createContext)({}),a=function(){var e=(0,r.useState)(0),n=e[0],t=e[1],i=(0,r.useState)([]),a=i[0],o=i[1];return{isLastPage:0===a.length||n===a.length-1,page:n,addPage:function(){var e=a.length;return a.push(e),o(Array.from(a)),e},prevPage:function(){return t(Math.max(0,n-1))},nextPage:function(){return t(Math.min(a.length-1,n+1))}}}},55777:function(e,n,t){t.d(n,{N:function(){return a}});var r=t(36808),i=t.n(r),a=function(){return i().get("platformId")}},99450:function(e,n,t){function r(e){var n=Math.floor(Math.abs(e));return(n<10?"0":"")+n}function i(e){var n=-e.getTimezoneOffset(),t=n>=0?"+":"-";return e.getFullYear()+"-"+r(e.getMonth()+1)+"-"+r(e.getDate())+"T"+r(e.getHours())+":"+r(e.getMinutes())+":"+r(e.getSeconds())+t+r(n/60)+":"+r(n%60)}t.d(n,{b:function(){return i}})}}]);
//# sourceMappingURL=97383.41831611.es5.js.map