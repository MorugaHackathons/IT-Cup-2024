(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[8798],{18438:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});var r=function(e){if("undefined"==typeof document)return 0;if(document.body&&(!document.readyState||"loading"!==document.readyState)){if(!0!==e&&"number"==typeof r.__cache)return r.__cache;var t=document.createElement("div"),n=t.style;n.display="block",n.position="absolute",n.width="100px",n.height="100px",n.left="-999px",n.top="-999px",n.overflow="scroll",document.body.insertBefore(t,null);var o=t.clientWidth;if(0!==o)return r.__cache=100-o,document.body.removeChild(t),r.__cache;document.body.removeChild(t)}}},32718:function(e,t,n){"use strict";n.r(t),n.d(t,{CitiesModalDesktop:function(){return oe},CitiesModalDesktopWithoutEvent:function(){return ae}});var r=n(45761),o=n(40957),a=n(67294),l=n(63366),i=["Modal","isOpen"],c=n(87462),s=n(50106),u=n(21569),d={FOCUSED:2,DEFAULT:5,POSITIONER:20,OVERLAY:30},p=(0,a.createContext)(d.DEFAULT),m=["children","value"],f=function(e){var t=e.children,n=e.value,r=void 0===n?d.DEFAULT:n,o=(0,l.Z)(e,m);return a.createElement(p.Consumer,null,(function(e){var n=Math.max(r,e),l=n+1;return a.createElement(p.Provider,{value:l},(0,a.cloneElement)(t(n),Object.assign({},o)))}))},v=n(94184),y=n.n(v),h=n(22345),g=n(98114),C=n(18438),E=n(83790),b=function(e){(0,E.nY)("body_overflow_shift",e)},w=function(e){(0,a.useEffect)((function(){var t=document.body.style,n=t.overflow,r=t.paddingRight,o=(0,C.L)(e),a=window.innerWidth>document.body.offsetWidth;return"hidden"!==n&&(document.body.style.overflow="hidden"),o&&a&&(document.body.style.paddingRight=(parseInt(getComputedStyle(document.body).paddingRight,10)||0)+o+"px",b(o)),function(){var e=document.body.style.overflow;o&&a&&(document.body.style.paddingRight=r,b(0)),e!==n&&(document.body.style.overflow=n)}}),[e])},R=(0,r.A)({CloseIcon:function(e){var t=e.className;return a.createElement("svg",{className:t,viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M23.6 1a1 1 0 0 1 1.5 1.4L2.4 25.1A1 1 0 0 1 1 23.6L23.6 1z"}),a.createElement("path",{d:"M1 2.4A1 1 0 0 1 2.4 1l22.7 22.6a1 1 0 0 1-1.5 1.5L1 2.4z"}))},IconAlfaLogo:function(e){return a.createElement("svg",(0,c.Z)({height:"50",viewBox:"0 0 33 50",width:"33"},e),a.createElement("path",{clipRule:"evenodd",d:"M0 49.982v-6.825h32.61v6.825H0zm11.646-28.764h9.064L16.39 7.526h-.17l-4.573 13.692h-.001zm10.587-16.22l9.615 28.887h-7.115l-2.16-6.866H9.698l-2.33 6.867H.679l10.09-28.887C11.746 2.197 12.887 0 16.559 0s4.744 2.206 5.674 4.999v-.001z",fill:"currentColor",fillRule:"evenodd"}))},Layout:s.c,Portal:u.h,Stack:f,stackingOrder:d,styles:{modal:"a3rpp",modalWithSize:"b3rpp",content:"c3rpp",contentOverflow:"d3rpp",contentWithSize:"e3rpp",xs:"f3rpp",s:"g3rpp",m:"h3rpp",l:"i3rpp",fullwidth:"j3rpp",contentWrapper:"k3rpp",contentWrapperCenter:"l3rpp",contentWrapperFullHeight:"m3rpp",contentWrapperWithSize:"n3rpp",closeButton:"o3rpp",logo:"p3rpp",external:"q3rpp",logoIcon:"r3rpp",closeIcon:"s3rpp"}})((function(e){var t=e.analytics,n=e.CloseIcon,r=e.IconAlfaLogo,o=e.Layout,l=e.Portal,i=e.Stack,c=e.alignCenter,s=e.children,u=e.contentOverflow,d=e.dataTestId,p=void 0===d?"modal":d,m=e.fullHeight,f=void 0!==m&&m,v=e.id,C=e.isCloseIcon,E=void 0===C||C,b=e.logo,R=e.onClose,I=void 0===R?function(){}:R,O=e.stackingOrder,x=e.size,N=e.styles,T=e.classNames,A=void 0===T?{}:T;w();var L=(0,a.useRef)(null),k=function(){t&&(0,h.q)(t),I()},M=function(e){e.target===L.current&&k()};(0,g.Z)("Escape",I);var S=function(){return E?a.createElement("button",{className:N.closeButton,"data-test-id":"modalCloseButton",onClick:k,type:"button"},a.createElement(n,{className:y()(N.external,N.closeIcon)})):null},W=function(){return b?a.createElement("div",{className:N.logo},a.createElement(r,{className:y()(N.external,N.logoIcon)})):null};return a.createElement(i,{value:O.OVERLAY},(function(e){var t;return a.createElement(l,null,a.createElement("div",{ref:L,className:y()(N.modal,(t={},t[N.modalWithSize]=!!x,t)),"data-test-id":p,id:v,onClick:M,style:{zIndex:e}},function(){var e;if(x){var t,n,r="fullwidth"===x?o:a.Fragment;return a.createElement(r,null,a.createElement("div",{className:y()(N.contentWrapper,N.contentWrapperWithSize,N[x],(t={},t[N.contentWrapperCenter]=c,t),A.wrapper)},W(),S(),a.createElement("div",{className:y()(N.content,N.contentWithSize,N[x],A.content,(n={},n[N.contentOverflow]=u,n)),"data-test-id":"modalWrapper"},s)))}return a.createElement("div",{className:y()(N.contentWrapper,(e={},e[N.contentWrapperFullHeight]=f,e))},W(),S(),a.createElement("div",{className:y()(N.content),"data-test-id":"modalWrapper"},s))}()))}))})),I=(0,r.A)({Modal:R})((function(e){var t=e.Modal,n=e.isOpen,r=void 0!==n&&n,o=(0,l.Z)(e,i);return r?a.createElement(t,o):null})),O=n(74109),x=n(55112),N=n(43897),T=n(62161),A=["alt","className","lazy","radiusKind","responsive","srcRetina","styles","verticalAlign"],L=(0,r.A)({styles:{baseline:"a2s3I",bottom:"b2s3I",middle:"c2s3I",top:"d2s3I",defaultKindRadius:"e2s3I",containerKindRadius:"f2s3I",cardKindRadius:"g2s3I",iconKindRadius:"h2s3I",responsive:"i2s3I"}})((function(e){var t,n=e.alt,r=e.className,o=e.lazy,i=void 0===o||o,s=e.radiusKind,u=void 0===s?"default":s,d=e.responsive,p=void 0!==d&&d,m=e.srcRetina,f=e.styles,v=e.verticalAlign,h=void 0===v?"baseline":v,g=(0,l.Z)(e,A);return a.createElement("img",(0,c.Z)({alt:n,className:y()(f[""+h],f[u+"KindRadius"],(t={},t[f.responsive]=p,t),r),loading:i?"lazy":void 0,srcSet:m?m+" 2x":void 0},g))})),k=n(20296),M=n(5106),S=(0,a.createContext)(1),W="right",P="bottom",H="left",F={TOP:"top",RIGHT:W,BOTTOM:P,LEFT:H},z=["arrowProps","ref","style"],_=["scroll","mousewheel","resize","touchmove"];var B=n(10076),D=(0,r.A)({IconCross:B.W,styles:{contentContainer:"a215R",closeButtonPadding:"b215R",topContentContainer:"c215R",bottomContentContainer:"d215R",rightContentContainer:"e215R",leftContentContainer:"f215R",arrow:"g215R",topArrow:"h215R",bottomArrow:"i215R",rightArrow:"j215R",leftArrow:"k215R",arrowHorizontal:"l215R",closeContainer:"m215R"}})((function(e){var t,n,r=e.arrowProps,o=e.children,l=e.className,i=e.dataTestId,c=void 0===i?"popover":i,s=e.innerRef,u=e.onClose,d=e.onMouseLeave,p=e.onMouseOver,m=e.placement,f=void 0===m?F.BOTTOM:m,v=e.showCloseButton,h=e.style,g=e.IconCross,C=e.styles,E=e.maxWidth,b=void 0===E?290:E,w=[F.LEFT,F.RIGHT].includes(f),R=C[f+"ContentContainer"],I=C[f+"Arrow"];return a.createElement("div",{ref:s,className:y()(C.contentContainer,R,(t={},t[C.closeButtonPadding]=v,t),l),"data-test-id":c+"-arrow-container",onFocus:p,onMouseLeave:d,onMouseOver:p,role:"tooltip",style:Object.assign({},h,{maxWidth:b})},o,a.createElement("div",{ref:r.ref,className:y()(C.arrow,I,(n={},n[C.arrowHorizontal]=w,n),r.className),"data-test-id":c+"-arrow",style:r.style}),v&&a.createElement("div",{className:C.closeContainer,"data-test-id":c+"-arrow-container-close-button",onClick:u},a.createElement(g,{height:16,width:16})))})),U=(0,r.A)({ContentContainer:D})((function(e){var t,n,r=e.ContentContainer,o=e.blockChild,i=e.boundariesElement,s=void 0===i?null:i,p=e.children,m=e.className,v=e.closeOnExterntalClick,y=void 0===v||v,h=e.content,g=e.contentContainerProps,C=void 0===g?{showCloseButton:!0,maxWidth:290}:g,E=e.createTree,b=e.dataTestId,w=void 0===b?"popover":b,R=e.isHover,I=e.offset,O=void 0===I?0:I,x=e.onClose,N=e.onOpen,T=e.placement,A=void 0===T?F.BOTTOM:T,L=e.tooltipHideTimeout,W=(0,a.useRef)(null),P=(0,a.useRef)(null),H=(0,a.useRef)(),B=(0,a.useState)(!1),D=B[0],U=B[1],Z=(0,a.useRef)(D),K=function(e){Z.current=e,U(e)},j=(0,a.useCallback)((function(){document.body.removeEventListener("click",t,!1),_.forEach((function(e){return document.removeEventListener(e,n)}))}),[]);n=(0,a.useCallback)((function(e){Z.current&&(K(!1),j(),x&&x(e))}),[x,j]);var X=(0,k.debounce)(n,L||0),Y=function(){document.body.addEventListener("click",t,!1),_.forEach((function(e){return document.addEventListener(e,n)}))},q=(0,a.useCallback)((function(e){Z.current||(K(!0),Y(),N&&N(e))}),[Y,N]);t=(0,a.useCallback)((function(e){var t;W.current===e.target||null!=(t=W.current)&&t.contains(e.target)||P.current&&P.current.contains(e.target)||y&&n(e)}),[W,P,y,n]);var G=(0,a.useState)(null),V=G[0],J=G[1],Q=(0,a.useCallback)((function(){return"string"==typeof s?document.body.querySelector(s):s instanceof HTMLElement?s:null}),[s]);(0,a.useEffect)((function(){J(Q())}),[Q]);var $=(0,a.useCallback)((function(e){var t,r,o,a=function(e){return"event"in e?e.event:e}(e);H.current=(t={x:a.clientX,y:a.clientY},r=t.x,o=t.y,{getBoundingClientRect:function(){return{top:o,left:r,bottom:o,right:r,width:0,height:0}},clientWidth:0,clientHeight:0}),Z.current?n(a):q(a)}),[H,n,q]),ee=(0,a.useCallback)((function(){X.clear()}),[X]),te=(0,a.useMemo)((function(){return"object"==typeof h&&"function"==typeof E}),[h,E]),ne=(0,a.useMemo)((function(){var e=R?{onMouseOver:q,onMouseOut:X}:{onClick:$};return(0,a.cloneElement)(p,Object.assign({},e))}),[p,X,R,q,$]),re=(0,a.useMemo)((function(){return"function"==typeof h?h({close:n}):te?E?E(h):void 0:h}),[te,n,h,E]),oe=(0,a.useMemo)((function(){return[{name:"preventOverflow",options:{boundary:V||"clippingParents",altBoundary:!0}},{name:"offset",options:{offset:Array.isArray(O)?O:[parseInt(O,10),parseInt(O,10)]}}]}),[V,O]);return a.createElement(a.Fragment,null,o?a.createElement("div",{ref:W,"data-test-id":w+"-target"},ne):a.createElement("span",{ref:W,"data-test-id":w+"-target"},ne),D&&W.current&&a.createElement(S.Consumer,null,(function(e){var t=e<1?H.current:W.current;return a.createElement(f,{value:d.POSITIONER},(function(e){return a.createElement(u.h,null,a.createElement(M.r,{modifiers:oe,placement:A,referenceElement:t},(function(t){var o=t.arrowProps,i=t.ref,s=t.style,u=(0,l.Z)(t,z);return a.createElement(r,(0,c.Z)({innerRef:function(e){P.current=e,i(e)},onClose:n,style:Object.assign({},s,{zIndex:e})},u,C,{arrowProps:Object.assign({},o,C.arrowProps),className:m,dataTestId:w,onMouseLeave:R?n:void 0,onMouseOver:ee}),re)})))}))})))})),Z=n(30989),K=n(46579),j="a2cR8",X="b2cR8",Y="c2cR8",q="d2cR8",G=function(e){var t=e.cityIcon,n=e.cityName,r=e.onClick,o=a.createElement(Z.F,{className:Y,onClick:r,tabIndex:0},n,t&&!1!==t.iconVisible&&a.createElement(L,{alt:t.alt,height:14,src:t.iconUrl,styler:{marginLeft:8},width:12}));return t?a.createElement(U,{className:y()(j,q),content:a.createElement(T.x,{fontPreset:"primaryNormal",tag:"span"},t.title),contentContainerProps:{showCloseButton:!1},isHover:!0,offset:[0,20],placement:"right"},o):o},V=function(e){var t=e.city,n=e.cityIcon,r=e.className,o=e.onClick,l=void 0===o?K.ZT:o,i=e.searchMode,c=e.styler;return a.createElement(T.x,{className:y()(j,X,r),styler:c,tag:"h2"},i?N.pX.titleWhileSearch:N.pX.titleForHeader,a.createElement(G,{cityIcon:n,cityName:t.cityNameRus,onClick:function(){return l(t)}}))},J=n(2762),Q=n(87436),$=n(83321),ee=n(87366),te=n(49596),ne=function(e){var t=e.cities,n=e.geoGroups,r=void 0===n?N.t:n,o=e.topCities,l=void 0===o?N.KD:o,i=e.aliases,c=void 0===i?N.d:i,s=e.cityIcons,u=void 0===s?N.ZC:s,d=e.onChange,p=void 0===d?K.ZT:d,m=e.onClose,f=void 0===m?K.ZT:m,v=e.geo,h=e.open,g=void 0!==h&&h,C=e.styles,E=e.dataTestId,b=e.analytics,w=(0,te.M)({cityPath:null==v?void 0:v.cityPath,geoGroups:t||r,topCities:l,aliases:c}),R=w.autoDetectedFiasId,T=w.bySearch,A=w.changeSearch,L=w.currentCity,k=w.searchValue,M=w.top;(0,a.useEffect)((function(){g||A("")}),[A,g]);var S=(0,K.dO)(),W=(0,Q.z)({open:g,onChange:p,onClose:f,changeSearch:A},b),P=W.changeHandler,H=W.closeHandler,F=W.searchHandler,z=(0,a.useCallback)((function(){F({target:{value:""}})}),[F]);return a.createElement(I,{classNames:{wrapper:y()(C.external,C.modalWrapper),content:y()(C.external,C.modal)},dataTestId:E,isOpen:g,onClose:H,size:"m",styler:{padding:0}},L&&a.createElement(V,{city:L,cityIcon:u[L.fiasId],onClick:P,searchMode:null!==T,styler:{marginTop:0,marginBottom:16}}),a.createElement(O.M,{autoComplete:"off",className:y()(C.external,C.search),onChange:F,onClose:z,onSubmit:S,placeholder:N.pX.searchPlaceholder,value:k}),null===T&&a.createElement(a.Fragment,null,a.createElement(ee.x,{styler:{marginTop:24,marginBottom:24}},N.pX.topCitiesHeader),a.createElement($.P,{autoDetectedFiasId:R,onClick:function(e){return P(e,!0)},topCities:M})),T&&T.length>0&&a.createElement(x.t,{alignX:"left",alignY:"top",className:y()(C.external,C.listHolder),styler:{paddingLeft:40}},a.createElement(J.a,{cities:T,onClick:P})),T&&0===T.length&&a.createElement(ee.x,{styler:{marginTop:24,marginBottom:24}},N.pX.emptyText))},re={external:"a3te3",modalWrapper:"b3te3",modal:"c3te3",listHolder:"d3te3",search:"e3te3"},oe=(0,r.A)({styles:re})((0,o.p)(ne)),ae=(0,r.A)({styles:re})(ne)},20296:function(e){function t(e,t,n){var r,o,a,l,i;function c(){var s=Date.now()-l;s<t&&s>=0?r=setTimeout(c,t-s):(r=null,n||(i=e.apply(a,o),a=o=null))}null==t&&(t=100);var s=function(){a=this,o=arguments,l=Date.now();var s=n&&!r;return r||(r=setTimeout(c,t)),s&&(i=e.apply(a,o),a=o=null),i};return s.clear=function(){r&&(clearTimeout(r),r=null)},s.flush=function(){r&&(i=e.apply(a,o),a=o=null,clearTimeout(r),r=null)},s}t.debounce=t,e.exports=t},5106:function(e,t,n){"use strict";n.d(t,{r:function(){return v}});var r=n(67294),o=r.createContext();r.createContext();var a=function(e,t){if("function"==typeof e)return function(e){if("function"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}}(e,t);null!=e&&(e.current=t)},l=function(e){return e.reduce((function(e,t){var n=t[0],r=t[1];return e[n]=r,e}),{})},i="undefined"!=typeof window&&window.document&&window.document.createElement?r.useLayoutEffect:r.useEffect,c=n(73433),s=n(69590),u=n.n(s),d=[],p=function(){},m=function(){return Promise.resolve(null)},f=[];function v(e){var t=e.placement,n=void 0===t?"bottom":t,s=e.strategy,v=void 0===s?"absolute":s,y=e.modifiers,h=void 0===y?f:y,g=e.referenceElement,C=e.onFirstUpdate,E=e.innerRef,b=e.children,w=r.useContext(o),R=r.useState(null),I=R[0],O=R[1],x=r.useState(null),N=x[0],T=x[1];r.useEffect((function(){return a(E,I)}),[E,I]);var A,L=r.useMemo((function(){return{placement:n,strategy:v,onFirstUpdate:C,modifiers:[].concat(h,[{name:"arrow",enabled:null!=N,options:{element:N}}])}}),[n,v,C,h,N]),k=function(e,t,n){void 0===n&&(n={});var o=r.useRef(null),a={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||d},s=r.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"}},attributes:{}}),p=s[0],m=s[1],f=r.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,n=Object.keys(t.elements);m({styles:l(n.map((function(e){return[e,t.styles[e]||{}]}))),attributes:l(n.map((function(e){return[e,t.attributes[e]]})))})},requires:["computeStyles"]}}),[]),v=r.useMemo((function(){var e={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[f,{name:"applyStyles",enabled:!1}])};return u()(o.current,e)?o.current||e:(o.current=e,e)}),[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,f]),y=r.useRef();return i((function(){y.current&&y.current.setOptions(v)}),[v]),i((function(){if(null!=e&&null!=t){var r=(n.createPopper||c.fi)(e,t,v);return y.current=r,function(){r.destroy(),y.current=null}}}),[e,t,n.createPopper]),{state:y.current?y.current.state:null,styles:p.styles,attributes:p.attributes,update:y.current?y.current.update:null,forceUpdate:y.current?y.current.forceUpdate:null}}(g||w,I,L),M=k.state,S=k.styles,W=k.forceUpdate,P=k.update,H=r.useMemo((function(){return{ref:O,style:S.popper,placement:M?M.placement:n,hasPopperEscaped:M&&M.modifiersData.hide?M.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:M&&M.modifiersData.hide?M.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:S.arrow,ref:T},forceUpdate:W||p,update:P||m}}),[O,T,n,M,S,P,W]);return(A=b,Array.isArray(A)?A[0]:A)(H)}}}]);
//# sourceMappingURL=CitiesModalDesktop.fb05d701.es5.js.map