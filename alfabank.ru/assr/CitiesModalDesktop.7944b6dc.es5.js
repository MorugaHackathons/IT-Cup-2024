(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[8798],{60440:function(e,t,n){"use strict";n.r(t),n.d(t,{CitiesModalDesktop:function(){return te},CitiesModalDesktopWithoutEvent:function(){return ne}});var r=n(45761),o=n(40957),a=n(67294),l=n(63366),i=["Modal","isOpen"],c=n(87462),s=n(23975),u=n(21569),d={FOCUSED:2,DEFAULT:5,POSITIONER:20,OVERLAY:30},p=(0,a.createContext)(d.DEFAULT),f=["children","value"],m=function(e){var t=e.children,n=e.value,r=void 0===n?d.DEFAULT:n,o=(0,l.Z)(e,f);return a.createElement(p.Consumer,null,(function(e){var n=Math.max(r,e),l=n+1;return a.createElement(p.Provider,{value:l},(0,a.cloneElement)(t(n),Object.assign({},o)))}))},v=n(94184),y=n.n(v),h=n(22345),g=n(98114),C=n(84357),E=(0,r.A)({CloseIcon:function(e){var t=e.className;return a.createElement("svg",{className:t,viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M23.6 1a1 1 0 0 1 1.5 1.4L2.4 25.1A1 1 0 0 1 1 23.6L23.6 1z"}),a.createElement("path",{d:"M1 2.4A1 1 0 0 1 2.4 1l22.7 22.6a1 1 0 0 1-1.5 1.5L1 2.4z"}))},IconAlfaLogo:function(e){return a.createElement("svg",(0,c.Z)({height:"50",viewBox:"0 0 33 50",width:"33"},e),a.createElement("path",{clipRule:"evenodd",d:"M0 49.982v-6.825h32.61v6.825H0zm11.646-28.764h9.064L16.39 7.526h-.17l-4.573 13.692h-.001zm10.587-16.22l9.615 28.887h-7.115l-2.16-6.866H9.698l-2.33 6.867H.679l10.09-28.887C11.746 2.197 12.887 0 16.559 0s4.744 2.206 5.674 4.999v-.001z",fill:"currentColor",fillRule:"evenodd"}))},Layout:s.c,Portal:u.h,Stack:m,stackingOrder:d,styles:{modal:"a3rpp",modalWithSize:"b3rpp",content:"c3rpp",contentOverflow:"d3rpp",contentWithSize:"e3rpp",xs:"f3rpp",s:"g3rpp",m:"h3rpp",l:"i3rpp",fullwidth:"j3rpp",contentWrapper:"k3rpp",contentWrapperCenter:"l3rpp",contentWrapperFullHeight:"m3rpp",contentWrapperWithSize:"n3rpp",closeButton:"o3rpp",logo:"p3rpp",external:"q3rpp",logoIcon:"r3rpp",closeIcon:"s3rpp"}})((function(e){var t=e.analytics,n=e.CloseIcon,r=e.IconAlfaLogo,o=e.Layout,l=e.Portal,i=e.Stack,c=e.alignCenter,s=e.children,u=e.contentOverflow,d=e.dataTestId,p=void 0===d?"modal":d,f=e.fullHeight,m=void 0!==f&&f,v=e.id,E=e.isCloseIcon,b=void 0===E||E,w=e.logo,R=e.onClose,I=void 0===R?function(){}:R,O=e.stackingOrder,N=e.size,A=e.styles,L=e.classNames,T=void 0===L?{}:L;(0,C.N)();var x=(0,a.useRef)(null),M=function(){t&&(0,h.q)(t),I()},k=function(e){e.target===x.current&&M()};(0,g.Z)("Escape",I);var S=function(){return b?a.createElement("button",{className:A.closeButton,"data-test-id":"modalCloseButton",onClick:M,type:"button"},a.createElement(n,{className:y()(A.external,A.closeIcon)})):null},W=function(){return w?a.createElement("div",{className:A.logo},a.createElement(r,{className:y()(A.external,A.logoIcon)})):null};return a.createElement(i,{value:O.OVERLAY},(function(e){var t;return a.createElement(l,null,a.createElement("div",{ref:x,className:y()(A.modal,(t={},t[A.modalWithSize]=!!N,t)),"data-test-id":p,id:v,onClick:k,style:{zIndex:e}},function(){var e;if(N){var t,n,r="fullwidth"===N?o:a.Fragment;return a.createElement(r,null,a.createElement("div",{className:y()(A.contentWrapper,A.contentWrapperWithSize,A[N],(t={},t[A.contentWrapperCenter]=c,t),T.wrapper)},W(),S(),a.createElement("div",{className:y()(A.content,A.contentWithSize,A[N],T.content,(n={},n[A.contentOverflow]=u,n)),"data-test-id":"modalWrapper"},s)))}return a.createElement("div",{className:y()(A.contentWrapper,(e={},e[A.contentWrapperFullHeight]=m,e))},W(),S(),a.createElement("div",{className:y()(A.content),"data-test-id":"modalWrapper"},s))}()))}))})),b=(0,r.A)({Modal:E})((function(e){var t=e.Modal,n=e.isOpen,r=void 0!==n&&n,o=(0,l.Z)(e,i);return r?a.createElement(t,o):null})),w=n(74109),R=n(57157),I=n(43897),O=n(62161),N=["alt","className","lazy","radiusKind","responsive","srcRetina","styles","verticalAlign"],A=(0,r.A)({styles:{baseline:"a2s3I",bottom:"b2s3I",middle:"c2s3I",top:"d2s3I",defaultKindRadius:"e2s3I",containerKindRadius:"f2s3I",cardKindRadius:"g2s3I",iconKindRadius:"h2s3I",responsive:"i2s3I"}})((function(e){var t,n=e.alt,r=e.className,o=e.lazy,i=void 0===o||o,s=e.radiusKind,u=void 0===s?"default":s,d=e.responsive,p=void 0!==d&&d,f=e.srcRetina,m=e.styles,v=e.verticalAlign,h=void 0===v?"baseline":v,g=(0,l.Z)(e,N);return a.createElement("img",(0,c.Z)({alt:n,className:y()(m[""+h],m[u+"KindRadius"],(t={},t[m.responsive]=p,t),r),loading:i?"lazy":void 0,srcSet:f?f+" 2x":void 0},g))})),L=n(20296),T=n(5106),x=(0,a.createContext)(1),M="right",k="bottom",S="left",W={TOP:"top",RIGHT:M,BOTTOM:k,LEFT:S},P=["arrowProps","ref","style"],F=["scroll","mousewheel","resize","touchmove"];var H=n(10076),z=(0,r.A)({IconCross:H.W,styles:{contentContainer:"a215R",closeButtonPadding:"b215R",topContentContainer:"c215R",bottomContentContainer:"d215R",rightContentContainer:"e215R",leftContentContainer:"f215R",arrow:"g215R",topArrow:"h215R",bottomArrow:"i215R",rightArrow:"j215R",leftArrow:"k215R",arrowHorizontal:"l215R",closeContainer:"m215R"}})((function(e){var t,n,r=e.arrowProps,o=e.children,l=e.className,i=e.dataTestId,c=void 0===i?"popover":i,s=e.innerRef,u=e.onClose,d=e.onMouseLeave,p=e.onMouseOver,f=e.placement,m=void 0===f?W.BOTTOM:f,v=e.showCloseButton,h=e.style,g=e.IconCross,C=e.styles,E=e.maxWidth,b=void 0===E?290:E,w=[W.LEFT,W.RIGHT].includes(m),R=C[m+"ContentContainer"],I=C[m+"Arrow"];return a.createElement("div",{ref:s,className:y()(C.contentContainer,R,(t={},t[C.closeButtonPadding]=v,t),l),"data-test-id":c+"-arrow-container",onFocus:p,onMouseLeave:d,onMouseOver:p,role:"tooltip",style:Object.assign({},h,{maxWidth:b})},o,a.createElement("div",{ref:r.ref,className:y()(C.arrow,I,(n={},n[C.arrowHorizontal]=w,n),r.className),"data-test-id":c+"-arrow",style:r.style}),v&&a.createElement("div",{className:C.closeContainer,"data-test-id":c+"-arrow-container-close-button",onClick:u},a.createElement(g,{height:16,width:16})))})),D=(0,r.A)({ContentContainer:z})((function(e){var t,n,r=e.ContentContainer,o=e.blockChild,i=e.boundariesElement,s=void 0===i?null:i,p=e.children,f=e.className,v=e.closeOnExterntalClick,y=void 0===v||v,h=e.content,g=e.contentContainerProps,C=void 0===g?{showCloseButton:!0,maxWidth:290}:g,E=e.createTree,b=e.dataTestId,w=void 0===b?"popover":b,R=e.isHover,I=e.offset,O=void 0===I?0:I,N=e.onClose,A=e.onOpen,M=e.placement,k=void 0===M?W.BOTTOM:M,S=e.tooltipHideTimeout,H=(0,a.useRef)(null),z=(0,a.useRef)(null),D=(0,a.useRef)(),B=(0,a.useState)(!1),U=B[0],_=B[1],K=(0,a.useRef)(U),Z=function(e){K.current=e,_(e)},j=(0,a.useCallback)((function(){document.body.removeEventListener("click",t,!1),F.forEach((function(e){return document.removeEventListener(e,n)}))}),[]);n=(0,a.useCallback)((function(e){K.current&&(Z(!1),j(),N&&N(e))}),[N,j]);var V=(0,L.debounce)(n,S||0),X=function(){document.body.addEventListener("click",t,!1),F.forEach((function(e){return document.addEventListener(e,n)}))},Y=(0,a.useCallback)((function(e){K.current||(Z(!0),X(),A&&A(e))}),[X,A]);t=(0,a.useCallback)((function(e){var t;H.current===e.target||null!=(t=H.current)&&t.contains(e.target)||z.current&&z.current.contains(e.target)||y&&n(e)}),[H,z,y,n]);var q=(0,a.useState)(null),G=q[0],J=q[1],Q=(0,a.useCallback)((function(){return"string"==typeof s?document.body.querySelector(s):s instanceof HTMLElement?s:null}),[s]);(0,a.useEffect)((function(){J(Q())}),[Q]);var $=(0,a.useCallback)((function(e){var t,r,o,a=function(e){return"event"in e?e.event:e}(e);D.current=(t={x:a.clientX,y:a.clientY},r=t.x,o=t.y,{getBoundingClientRect:function(){return{top:o,left:r,bottom:o,right:r,width:0,height:0}},clientWidth:0,clientHeight:0}),K.current?n(a):Y(a)}),[D,n,Y]),ee=(0,a.useCallback)((function(){V.clear()}),[V]),te=(0,a.useMemo)((function(){return"object"==typeof h&&"function"==typeof E}),[h,E]),ne=(0,a.useMemo)((function(){var e=R?{onMouseOver:Y,onMouseOut:V}:{onClick:$};return(0,a.cloneElement)(p,Object.assign({},e))}),[p,V,R,Y,$]),re=(0,a.useMemo)((function(){return"function"==typeof h?h({close:n}):te?E?E(h):void 0:h}),[te,n,h,E]),oe=(0,a.useMemo)((function(){return[{name:"preventOverflow",options:{boundary:G||"clippingParents",altBoundary:!0}},{name:"offset",options:{offset:Array.isArray(O)?O:[parseInt(O,10),parseInt(O,10)]}}]}),[G,O]);return a.createElement(a.Fragment,null,o?a.createElement("div",{ref:H,"data-test-id":w+"-target"},ne):a.createElement("span",{ref:H,"data-test-id":w+"-target"},ne),U&&H.current&&a.createElement(x.Consumer,null,(function(e){var t=e<1?D.current:H.current;return a.createElement(m,{value:d.POSITIONER},(function(e){return a.createElement(u.h,null,a.createElement(T.r,{modifiers:oe,placement:k,referenceElement:t},(function(t){var o=t.arrowProps,i=t.ref,s=t.style,u=(0,l.Z)(t,P);return a.createElement(r,(0,c.Z)({innerRef:function(e){z.current=e,i(e)},onClose:n,style:Object.assign({},s,{zIndex:e})},u,C,{arrowProps:Object.assign({},o,C.arrowProps),className:f,dataTestId:w,onMouseLeave:R?n:void 0,onMouseOver:ee}),re)})))}))})))})),B=n(30989),U=n(46579),_="a2cR8",K="b2cR8",Z="c2cR8",j="d2cR8",V=function(e){var t=e.cityIcon,n=e.cityName,r=e.onClick,o=a.createElement(B.F,{className:Z,onClick:r,tabIndex:0},n,t&&!1!==t.iconVisible&&a.createElement(A,{alt:t.alt,height:14,src:t.iconUrl,styler:{marginLeft:8},width:12}));return t?a.createElement(D,{className:y()(_,j),content:a.createElement(O.x,{fontPreset:"primaryNormal",tag:"span"},t.title),contentContainerProps:{showCloseButton:!1},isHover:!0,offset:[0,20],placement:"right"},o):o},X=function(e){var t=e.city,n=e.cityIcon,r=e.className,o=e.onClick,l=void 0===o?U.ZT:o,i=e.searchMode,c=e.styler;return a.createElement(O.x,{className:y()(_,K,r),styler:c,tag:"h2"},i?I.pX.titleWhileSearch:I.pX.titleForHeader,a.createElement(V,{cityIcon:n,cityName:t.cityNameRus,onClick:function(){return l(t)}}))},Y=n(71509),q=n(87436),G=n(83321),J=n(87366),Q=n(49596),$=function(e){var t=e.cities,n=e.geoGroups,r=void 0===n?I.t:n,o=e.topCities,l=void 0===o?I.KD:o,i=e.aliases,c=void 0===i?I.d:i,s=e.cityIcons,u=void 0===s?I.ZC:s,d=e.onChange,p=void 0===d?U.ZT:d,f=e.onClose,m=void 0===f?U.ZT:f,v=e.geo,h=e.open,g=void 0!==h&&h,C=e.styles,E=e.dataTestId,O=e.analytics,N=(0,Q.M)({cityPath:null==v?void 0:v.cityPath,geoGroups:t||r,topCities:l,aliases:c}),A=N.autoDetectedFiasId,L=N.bySearch,T=N.changeSearch,x=N.currentCity,M=N.searchValue,k=N.top;(0,a.useEffect)((function(){g||T("")}),[T,g]);var S=(0,U.dO)(),W=(0,q.z)({open:g,onChange:p,onClose:m,changeSearch:T},O),P=W.changeHandler,F=W.closeHandler,H=W.searchHandler,z=(0,a.useCallback)((function(){H({target:{value:""}})}),[H]);return a.createElement(b,{classNames:{wrapper:y()(C.external,C.modalWrapper),content:y()(C.external,C.modal)},dataTestId:E,isOpen:g,onClose:F,size:"m",styler:{padding:0}},x&&a.createElement(X,{city:x,cityIcon:u[x.fiasId],onClick:P,searchMode:null!==L,styler:{marginTop:0,marginBottom:16}}),a.createElement(w.M,{autoComplete:"off",className:y()(C.external,C.search),onChange:H,onClose:z,onSubmit:S,placeholder:I.pX.searchPlaceholder,value:M}),null===L&&a.createElement(a.Fragment,null,a.createElement(J.x,{styler:{marginTop:24,marginBottom:24}},I.pX.topCitiesHeader),a.createElement(G.P,{autoDetectedFiasId:A,onClick:function(e){return P(e,!0)},topCities:k})),L&&L.length>0&&a.createElement(R.t,{alignX:"left",alignY:"top",className:y()(C.external,C.listHolder),styler:{paddingLeft:40}},a.createElement(Y.a,{cities:L,onClick:P})),L&&0===L.length&&a.createElement(J.x,{styler:{marginTop:24,marginBottom:24}},I.pX.emptyText))},ee={external:"a3te3",modalWrapper:"b3te3",modal:"c3te3",listHolder:"d3te3",search:"e3te3"},te=(0,r.A)({styles:ee})((0,o.p)($)),ne=(0,r.A)({styles:ee})($)},23975:function(e,t,n){"use strict";n.d(t,{c:function(){return a}});var r=n(45761),o=n(98907),a=(0,r.A)({styles:{layout:"a3buV",layoutContent:"b3buV",scrollLayout:"c3buV",scrollLayoutContent:"d3buV"}})(o.A)},76113:function(e,t,n){"use strict";n.d(t,{KF:function(){return a},lv:function(){return l},ej:function(){return i}});var r=n(83790),o="body_overflow_shift",a=function(e){(0,r.nY)(o,e)},l=function(e){(0,r.Ld)(o,e)},i=function(e){(0,r.r1)(o,e)}},84357:function(e,t,n){"use strict";n.d(t,{N:function(){return l}});var r=n(67294),o=n(18438),a=n(76113),l=function(e){(0,r.useEffect)((function(){var t=document.body.style,n=t.overflow,r=t.paddingRight,l=(0,o.L)(e),i=window.innerWidth>document.body.offsetWidth;return"hidden"!==n&&(document.body.style.overflow="hidden"),l&&i&&(document.body.style.paddingRight=(parseInt(getComputedStyle(document.body).paddingRight,10)||0)+l+"px",(0,a.KF)(l)),function(){var e=document.body.style.overflow;l&&i&&(document.body.style.paddingRight=r,(0,a.KF)(0)),e!==n&&(document.body.style.overflow=n)}}),[e])}},20296:function(e){function t(e,t,n){var r,o,a,l,i;function c(){var s=Date.now()-l;s<t&&s>=0?r=setTimeout(c,t-s):(r=null,n||(i=e.apply(a,o),a=o=null))}null==t&&(t=100);var s=function(){a=this,o=arguments,l=Date.now();var s=n&&!r;return r||(r=setTimeout(c,t)),s&&(i=e.apply(a,o),a=o=null),i};return s.clear=function(){r&&(clearTimeout(r),r=null)},s.flush=function(){r&&(i=e.apply(a,o),a=o=null,clearTimeout(r),r=null)},s}t.debounce=t,e.exports=t},5106:function(e,t,n){"use strict";n.d(t,{r:function(){return v}});var r=n(67294),o=r.createContext();r.createContext();var a=function(e,t){if("function"==typeof e)return function(e){if("function"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}}(e,t);null!=e&&(e.current=t)},l=function(e){return e.reduce((function(e,t){var n=t[0],r=t[1];return e[n]=r,e}),{})},i="undefined"!=typeof window&&window.document&&window.document.createElement?r.useLayoutEffect:r.useEffect,c=n(73433),s=n(69590),u=n.n(s),d=[],p=function(){},f=function(){return Promise.resolve(null)},m=[];function v(e){var t=e.placement,n=void 0===t?"bottom":t,s=e.strategy,v=void 0===s?"absolute":s,y=e.modifiers,h=void 0===y?m:y,g=e.referenceElement,C=e.onFirstUpdate,E=e.innerRef,b=e.children,w=r.useContext(o),R=r.useState(null),I=R[0],O=R[1],N=r.useState(null),A=N[0],L=N[1];r.useEffect((function(){return a(E,I)}),[E,I]);var T,x=r.useMemo((function(){return{placement:n,strategy:v,onFirstUpdate:C,modifiers:[].concat(h,[{name:"arrow",enabled:null!=A,options:{element:A}}])}}),[n,v,C,h,A]),M=function(e,t,n){void 0===n&&(n={});var o=r.useRef(null),a={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||d},s=r.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"}},attributes:{}}),p=s[0],f=s[1],m=r.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,n=Object.keys(t.elements);f({styles:l(n.map((function(e){return[e,t.styles[e]||{}]}))),attributes:l(n.map((function(e){return[e,t.attributes[e]]})))})},requires:["computeStyles"]}}),[]),v=r.useMemo((function(){var e={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[m,{name:"applyStyles",enabled:!1}])};return u()(o.current,e)?o.current||e:(o.current=e,e)}),[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,m]),y=r.useRef();return i((function(){y.current&&y.current.setOptions(v)}),[v]),i((function(){if(null!=e&&null!=t){var r=(n.createPopper||c.fi)(e,t,v);return y.current=r,function(){r.destroy(),y.current=null}}}),[e,t,n.createPopper]),{state:y.current?y.current.state:null,styles:p.styles,attributes:p.attributes,update:y.current?y.current.update:null,forceUpdate:y.current?y.current.forceUpdate:null}}(g||w,I,x),k=M.state,S=M.styles,W=M.forceUpdate,P=M.update,F=r.useMemo((function(){return{ref:O,style:S.popper,placement:k?k.placement:n,hasPopperEscaped:k&&k.modifiersData.hide?k.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:k&&k.modifiersData.hide?k.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:S.arrow,ref:L},forceUpdate:W||p,update:P||f}}),[O,L,n,k,S,P,W]);return(T=b,Array.isArray(T)?T[0]:T)(F)}}}]);
//# sourceMappingURL=CitiesModalDesktop.7944b6dc.es5.js.map