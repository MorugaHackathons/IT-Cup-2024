"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[48360],{32630:function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,{D:function(){return d}});var i=12,o=function(){function t(t,e){void 0===e&&(e=!0),this.buckets=void 0,this.isPayroll=void 0,this.buckets=t,this.isPayroll=e}var e=t.prototype;return e.getInterestRate=function(t){var e=this.buckets.find((function(e){return t>=e.lowerBound&&t<=e.upperBound}));return e?this.isPayroll?e.payrollClientLoanRate:e.notPayrollClientLoanRate:0},e.interestPerMonth=function(t){return this.getInterestRate(t)/100/12},e.getOfferToReduceInterestRate=function(t,e){for(var n=e.upperBoundStep,r=this.buckets,i=this.isPayroll?"payrollClientLoanRate":"notPayrollClientLoanRate",o=0;o<r.length;o++){var a=r[o].upperBound,s=t>=a-1e5&&t<=a,u=r[o+1],c=!!u&&r[o][i]-u[i]||0;if(s&&c>0)return[a+n,parseFloat(c.toFixed(2))]}return[0,0]},t}(),a=function(t){return Math.round(100*t)/100},s=function(t){return function(e){var n=e%t;return 0===n?e:t-n+e}},u=function(){function t(t){this.insuranceBuckets=void 0,this.insuranceBuckets=t}var e=t.prototype;return e.getRates=function(t){var e=this.insuranceBuckets.find((function(e){return t>=e.lowerBound&&t<=e.upperBound}))||{lowerBound:0,upperBound:0,rateFirstYear:0,rateAfterYear:0},n=e.rateAfterYear;return[e.rateFirstYear,n]},e.insuranceAmount=function(t,e){var n=this.getRates(t),r=n[0],i=n[1],o=12*e,s=o>12?13:o,u=500*Math.ceil(t/(1-r/12*s-i/12*o)/500);return a(u*r/12*s)+a(u*i/12*o)},e.insuranceWithCreditAmount=function(t,e){var n=t+this.insuranceAmount(t,e);return s(500)(n)},t}(),c=function(){function t(t){this.bankRates=void 0,this.percentToReduce=void 0;var e=t.bankRates,n=t.percentToReduce,r=void 0===n?0:n;this.bankRates=e,this.percentToReduce=r}var e=t.prototype;return e.getRatesByTerm=function(t){var e=this.bankRates.find((function(e){var n=e.lowerTerm,r=e.upperTerm;return void 0===r?n===t:t>=n&&t<=r}));return null==e?void 0:e.rates},e.getBankPercent=function(t,e){var n,r=this.getRatesByTerm(t);if(void 0===r)return 0;var i=r.find((function(t){var n=t.lowerPercentRate,r=t.upperPercentRate;return e>n&&e<=r}));return null!==(n=null==i?void 0:i.bankPercent)&&void 0!==n?n:0},t}(),d=function(){function t(t){var e=this,n=t.buckets,r=t.creditAmount,i=t.creditTerm,a=t.insuranceBuckets,d=t.bankRates,m=void 0===d?[]:d,h=t.percentToReduce,l=void 0===h?0:h,f=t.isMobile,g=void 0!==f&&f,v=t.maxCreditAmount,p=t.minCreditAmount,y=t.minPaymentRate,A=void 0===y?0:y,R=t.promoPeriodMonths,b=void 0===R?0:R;this.bucketMaster=void 0,this.insuranceAgent=void 0,this.commissioner=void 0,this.minPaymentRate=void 0,this.promoPeriodMonths=void 0,this.minCreditAmount=void 0,this.percentToReduce=void 0,this.maxCreditAmount=void 0,this.isMobile=void 0,this.creditAmountValue=void 0,this.creditTerm=void 0,this.getMonthlyPayments=function(t){return t.map((function(t){var n=e.getAnnuity(0,Number(t.value)),r=s(100);return Object.assign({monthlyPayment:r(-n)},t)}))},this.bucketMaster=new o(n),this.insuranceAgent=new u(a),this.commissioner=new c({bankRates:m,percentToReduce:l}),this.percentToReduce=l,this.minPaymentRate=A,this.promoPeriodMonths=b,this.creditAmountValue=r,this.creditTerm=i,this.isMobile=g,this.minCreditAmount=p,this.maxCreditAmount=v}var e,n,a,d=t.prototype;return d.getAnnuity=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.creditTerm);var n=(this.bucketMaster.getInterestRate(this.creditAmount)-t)/100/i,r=e*i-this.promoPeriodMonths;return(this.insuranceAgent.insuranceWithCreditAmount(this.creditAmount,e)-this.promoPeriodMonths*this.promoMonthlyPayment)*(-n*Math.pow(1+n,r)/(Math.pow(1+n,r)-1))},d.getEconomy=function(t){return this.monthlyPayment-t},d.getOfferToReduceRate=function(t,e){return this.bucketMaster.getOfferToReduceInterestRate(t,e)},d.getInsuranceAmount=function(t,e){return this.insuranceAgent.insuranceAmount(t,e)},d.getPercentsAmount=function(){for(var t=0,e=Math.abs(this.getAnnuity()),n=i*this.creditTerm,r=1;r<=n;r++){t+=e-Math.ceil(e*Math.pow(1+this.bucketMaster.interestPerMonth(this.creditAmount),r-n-1))}return t},d.overpaymentStep1=function(){var t=-Math.round(this.getAnnuity()),e=i*this.creditTerm*t;return s(10)(e-this.creditAmount)},d.overpaymentStep2=function(){var t=i*this.creditTerm*this.monthlyPaymentReducedRate;return s(10)(t-this.creditAmount)},d.getOverpaymentReduce=function(){return this.overpaymentStep1()-this.overpaymentStep2()},d.getCommission=function(){var t=Math.round(this.getOverpaymentReduce()),e=this.bucketMaster.getInterestRate(this.creditAmount),n=this.commissioner.getBankPercent(this.creditTerm,e)/100;return s(10)(t*n)},e=t,(n=[{key:"promoMonthlyPayment",get:function(){var t=this.insuranceAgent.insuranceWithCreditAmount(this.creditAmount,this.creditTerm)*(this.minPaymentRate/100);return s(100)(t)}},{key:"monthlyPayment",get:function(){var t=this.getAnnuity();return s(100)(-t)}},{key:"monthlyPaymentReducedRate",get:function(){var t=this.getAnnuity(this.percentToReduce);return-Math.round(t)}},{key:"interestRate",get:function(){return this.bucketMaster.getInterestRate(this.creditAmount)}},{key:"isCreditAvailable",get:function(){var t=this.creditAmount,e=this.maxCreditAmount;return t>=this.minCreditAmount&&t<=e}},{key:"promoEconomy",get:function(){return this.monthlyPayment-this.promoMonthlyPayment}},{key:"creditAmount",get:function(){return this.creditAmountValue},set:function(t){this.creditAmountValue=this.isMobile&&t>this.maxCreditAmount?this.maxCreditAmount:t}},{key:"monthlyPaymentWithCommission",get:function(){var t=(this.bucketMaster.getInterestRate(this.creditAmount)-this.percentToReduce)/100/i,e=this.creditTerm*i,n=this.insuranceAgent.insuranceWithCreditAmount(this.creditAmount,this.creditTerm)+this.getCommission();return s(100)(-n*(-t*Math.pow(1+t,e)/(Math.pow(1+t,e)-1)))}}])&&r(e.prototype,n),a&&r(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}()},30977:function(t,e,n){n.d(e,{y:function(){return m}});var r=n(45761),i=n(94369),o=n(11401),a=n(88959),s=n(10768),u=n(94184),c=n.n(u),d=n(67294),m=(0,r.A)({getCommaSeparation:s.y,styles:{external:"a3AhH",offerAmount:"b3AhH",offerPercent:"c3AhH"},separateThousands:i.B,Link:o.r,Text:a.x})((function(t){var e,n=t.Link,r=t.Text,i=t.dataTestId,o=void 0===i?"offer-hint":i,a=t.getCommaSeparation,s=t.kind,u=t.offerAmount,m=t.offerPercentage,h=t.offerPercentageHint,l=void 0===h?"Ставка снизится на #PERCENT# если увеличить сумму кредита до":h,f=t.onClick,g=t.percentTemplate,v=void 0===g?"#PERCENT#":g,p=t.separateThousands,y=t.styles,A=l.split(v),R=A[0],b=A[1],k=d.createElement(d.Fragment,null,p(u)," ₽");return d.createElement(r,{dataTestId:o,fontSize:14,kind:s,lineHeight:18,styler:{marginTop:0,marginBottom:0}},R,d.createElement(r,{className:c()(y.external,y.offerPercent),fontSize:14,lineHeight:18,styler:{marginTop:0,marginBottom:0},tag:"span"},a(String(m)),"%"),b," ",f&&(e=k,d.createElement(n,{border:"dashed",className:c()(y.external,y.offerAmount),dataTestId:o+"-link",onClick:f,theme:"grey"},e)),!f&&k," ")}))},18445:function(t,e,n){n.d(e,{V:function(){return s}});var r=n(88959),i=n(45761),o=n(33372),a=n(57767),s=(0,i.A)({styles:a.Z,Text:r.x})(o.V)},33372:function(t,e,n){n.d(e,{V:function(){return u}});var r=n(67294),i=n(94184),o=n.n(i),a=function(){},s={xs:"component-secondary",s:"component",m:"component",l:"primary-large"},u=(0,r.memo)((function(t){var e,n,i,u,c=t.Text,d=t.bordered,m=t.className,h=t.classNames,l=t.dataTestId,f=t.disabled,g=t.forwardedRef,v=t.label,p=t.onClick,y=void 0===p?a:p,A=t.selected,R=t.size,b=void 0===R?"m":R,k=t.styles,T=t.tabIndex,P=t.role,M=t.returnEvent,C=t.allOnclickArguments,x=void 0!==C&&C,w=t.value,B=t.inline,E=t.theme,X=void 0===E?"white":E,S=t.rightAddons,I=t.leftAddons,L=w===A,N=o()(k.tag,k.size,((e={})[k.selected]=L,e[k.hovered]=!L&&!f,e[k.disabled]=f,e[k.withRightAddons]=Boolean(S),e[k.withLeftAddons]=Boolean(I),e),k[b+"Size"],((n={})[k.bordered]=d,n),k[X],h,m),O=o()(k.external,k.text,((i={})[k.selectedText]=L,i));return r.createElement("button",{ref:g,className:N,"data-test-id":l,"data-test-selected":L||void 0,onClick:function(t){x?y(t,w):y(M?t:w)},role:P,tabIndex:T,type:"button"},I?r.createElement("span",{className:k.addons},I):null,r.createElement(c,{className:o()(O,(u={},u[o()(k.block,k.external)]=!B,u)),styler:{margin:0},tag:"span",view:s[b]},v),S?r.createElement("span",{className:k.addons},S):null)}))},57767:function(t,e){e.Z={tag:"a28gX",disabled:"b28gX",addons:"c28gX",withRightAddons:"d28gX",xsSize:"e28gX",sSize:"f28gX",mSize:"g28gX",lSize:"h28gX",withLeftAddons:"i28gX",white:"j28gX",text:"k28gX",external:"l28gX",selected:"m28gX",selectedText:"n28gX",hovered:"o28gX",bordered:"p28gX",lightInverted:"q28gX",size:"r28gX",block:"s28gX"}}}]);
//# sourceMappingURL=48360.68a1ed99.es5.js.map